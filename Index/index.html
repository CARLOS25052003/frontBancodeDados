<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Controle Financeiro</title>
</head>
<body>
<div class="container">
    <h1>Controle Financeiro</h1>
    <div class="header">
        <a href="../Index/historico/historico.html">Acessar Histórico Financeiro</a>
        <h2 id="currentYearMonth"></h2>
    </div>

    <div class="form-section">
        <h2>Adicionar Renda Fixa</h2>
        <form id="rendaFixaForm">
            <input type="text" id="rendaFixaDescription" class="form-control" placeholder="Descrição" required>
            <input type="number" id="rendaFixaAmount" step="0.01" class="form-control" placeholder="Valor (R$)" required>
            <input type="text" id="rendaFixaDate" class="form-control data-input" placeholder="DD/MM/AAAA" maxlength="10" required>
            <script>
                const rendaFixaDateInput = document.getElementById('rendaFixaDate');

                rendaFixaDateInput.addEventListener('input', (e) => {
                    let input = e.target.value;

                    input = input.replace(/\D/g, '');

                    // Formata automaticamente com "/"
                    if (input.length >= 3 && input.length <= 4) {
                        input = input.slice(0, 2) + '/' + input.slice(2);
                    } else if (input.length > 4) {
                        input = input.slice(0, 2) + '/' + input.slice(2, 4) + '/' + input.slice(4, 8);
                    }

                    e.target.value = input;
                });
            </script>
            <button type="submit" class="btn-adicionar-despesa">Adicionar Renda Fixa</button>
        </form>
    </div>

    <div class="form-section">
        <h2>Adicionar Renda Extra</h2>
        <form id="rendaExtraForm">
            <input type="text" id="rendaExtraDescription" placeholder="Descrição da Renda Extra" required>
            <input type="number" id="rendaExtraAmount" step="0.01" placeholder="Valor da Renda Extra (ex: 300,50)" required>
            <input type="text" id="rendaExtraDate" class="form-control data-input" placeholder="DD/MM/AAAA" maxlength="10" required>
            <script>
                const rendaExtraDateInput = document.getElementById('rendaExtraDate');

                rendaExtraDateInput.addEventListener('input', (e) => {
                    let input = e.target.value;

                    // Remove qualquer caractere que não seja um número
                    input = input.replace(/\D/g, '');

                    // Formata automaticamente com "/"
                    if (input.length >= 3 && input.length <= 4) {
                        input = input.slice(0, 2) + '/' + input.slice(2);
                    } else if (input.length > 4) {
                        input = input.slice(0, 2) + '/' + input.slice(2, 4) + '/' + input.slice(4, 8);
                    }

                    e.target.value = input;
                });
            </script>
            <button type="submit">Adicionar Renda Extra</button>
        </form>
    </div>

    <!-- Formulário de Adicionar Despesa -->
    <div class="form-section">
        <h2>Adicionar Despesa</h2>
        <form id="despesaForm">
            <input type="text" id="despesaDescription" class="form-control" placeholder="Descrição da Despesa" required>
            <input type="number" id="despesaAmount" step="0.01" class="form-control" placeholder="Valor da Despesa (ex: 500,00)" required>
            <input type="text" id="despesaDate" class="form-control data-input" placeholder="DD/MM/AAAA" maxlength="10" required>

            <div class="pagamento_bar">
            <label for="metodoPagamento">Método de Pagamento:</label>
            <select id="metodoPagamento" class="form-control" required>
                <option value="" disabled selected>Selecione um método</option>
                <option value="Pix">Pix</option>
                <option value="Crédito">Crédito</option>
                <option value="Débito">Débito</option>
                <option value="Boleto">Boleto</option>
            </select>
            </div>
            <script>
                const despesaDateInput = document.getElementById('despesaDate');

                despesaDateInput.addEventListener('input', (e) => {
                    let input = e.target.value;

                    // Remove qualquer caractere que não seja um número
                    input = input.replace(/\D/g, '');

                    // Formata automaticamente com "/"
                    if (input.length >= 3 && input.length <= 4) {
                        input = input.slice(0, 2) + '/' + input.slice(2);
                    } else if (input.length > 4) {
                        input = input.slice(0, 2) + '/' + input.slice(2, 4) + '/' + input.slice(4, 8);
                    }

                    e.target.value = input;
                });
            </script>
            <button type="submit" class="btn-adicionar-despesa">Adicionar Despesa</button>
        </form>
    </div>

    <div class="form-section">
        <h2>Adicionar Despesa Fixa</h2>
        <form id="despesaFixaForm">
            <input type="text" id="despesaFixaDescription" class="form-control" placeholder="Descrição da Despesa Fixa" required>
            <input type="number" id="despesaFixaAmount" step="0.01" class="form-control" placeholder="Valor da Despesa Fixa (ex: 200,00)" required>
            <input type="text" id="despesaFixaDate" class="form-control data-input" placeholder="DD/MM/AAAA" maxlength="10" required>

            <div class="pagamento_bar">
            <label for="metodoPagamentoFixo">Método de Pagamento:</label>
            <select id="metodoPagamentoFixo" class="form-control" required>
                <option value="" disabled selected>Selecione um método</option>
                <option value="pix">Pix</option>
                <option value="credito">Crédito</option>
                <option value="debito">Débito</option>
                <option value="boleto">Boleto</option>
            </select>
            </div>
            <script>
                const despesaFixaDateInput = document.getElementById('despesaFixaDate');

                despesaFixaDateInput.addEventListener('input', (e) => {
                    let input = e.target.value;

                    // Remove qualquer caractere que não seja um número
                    input = input.replace(/\D/g, '');

                    // Formata automaticamente com "/"
                    if (input.length >= 3 && input.length <= 4) {
                        input = input.slice(0, 2) + '/' + input.slice(2);
                    } else if (input.length > 4) {
                        input = input.slice(0, 2) + '/' + input.slice(2, 4) + '/' + input.slice(4, 8);
                    }

                    e.target.value = input;
                });
            </script>
            <button type="submit" class="btn-adicionar-despesa">Adicionar Despesa Fixa</button>
        </form>
    </div>

    <div class="list-section">
        <h2>Rendas Fixas</h2>
        <ul id="rendaFixaList" class="list"></ul>

        <h2>Rendas Extras</h2>
        <ul id="rendaExtraList" class="list"></ul>

        <h2>Despesas</h2>
        <ul id="despesaList" class="list"></ul>

        <h2>Despesas Fixas</h2>
        <ul id="despesaFixaList" class="list"></ul>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <div class="container">
        <canvas id="myPieChart" width="600" height="600"></canvas>
    </div>

    <h2><span id="balance">0.00</span></h2>
</div>

<script src="app.js"></script>
<script>
    // Função para obter o ano atual
    function getCurrentYear() {
        const now = new Date();
        return now.getFullYear(); // Retorna o ano atual
    }

    // Função para obter o mês atual
    function getCurrentMonth() {
        const now = new Date();
        return now.getMonth() + 1; // Mês é de 0 a 11, então adicionamos 1
    }

    // Função para exibir o ano e o mês atuais
    function displayCurrentYearMonth() {
        const currentYear = getCurrentYear();
        const currentMonth = getCurrentMonth();
        const monthNames = [
            "Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho",
            "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"
        ];
        document.getElementById('currentYearMonth').innerText = `Ano: ${currentYear} - Mês: ${monthNames[currentMonth - 1]}`;
    }

    // Chame a função para exibir o ano e mês atuais ao carregar a página
    displayCurrentYearMonth();
</script>
</body>
</html>
