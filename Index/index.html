<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Controle Financeiro</title>
</head>
<body>
<div class="container">
    <h1>Controle Financeiro</h1>
    <div class="header">
        <h2 class="mes--atual" id="currentYearMonth"></h2>
    </div>

    <div class="form-section">
        <h2>Adicionar Renda Fixa</h2>
        <form id="rendaFixaForm">
            <input type="text" id="rendaFixaDescription" class="form-control" placeholder="Descrição" required>
            <input type="number" id="rendaFixaAmount" step="0.01" class="form-control" placeholder="Valor (R$)" required>
            <input type="text" id="rendaFixaDate" class="form-control data-input" placeholder="DD/MM/AAAA" maxlength="10" required>
            <script>
                const rendaFixaDateInput = document.getElementById('rendaFixaDate');

                rendaFixaDateInput.addEventListener('input', (e) => {
                    let input = e.target.value;

                    input = input.replace(/\D/g, '');

                    // Formata automaticamente com "/"
                    if (input.length >= 3 && input.length <= 4) {
                        input = input.slice(0, 2) + '/' + input.slice(2);
                    } else if (input.length > 4) {
                        input = input.slice(0, 2) + '/' + input.slice(2, 4) + '/' + input.slice(4, 8);
                    }

                    e.target.value = input;
                });
            </script>
            <button type="submit" class="btn-adicionar-despesa">Adicionar Renda Fixa</button>
        </form>
    </div>

    <div class="form-section">
        <h2>Adicionar Renda Extra</h2>
        <form id="rendaExtraForm">
            <input type="text" id="rendaExtraDescription" placeholder="Descrição da Renda Extra" required>
            <input type="number" id="rendaExtraAmount" step="0.01" placeholder="Valor da Renda Extra (ex: 300,50)" required>
            <script>
                input = input.slice(1) + 'R$'
            </script>
            <input type="text" id="rendaExtraDate" class="form-control data-input" placeholder="DD/MM/AAAA" maxlength="10" required>
            <script>
                const rendaExtraDateInput = document.getElementById('rendaExtraDate');

                rendaExtraDateInput.addEventListener('input', (e) => {
                    let input = e.target.value;

                    // Remove qualquer caractere que não seja um número
                    input = input.replace(/\D/g, '');

                    // Formata automaticamente com "/"
                    if (input.length >= 3 && input.length <= 4) {
                        input = input.slice(0, 2) + '/' + input.slice(2);
                    } else if (input.length > 4) {
                        input = input.slice(0, 2) + '/' + input.slice(2, 4) + '/' + input.slice(4, 8);
                    }

                    e.target.value = input;
                });
            </script>
            <button type="submit">Adicionar Renda Extra</button>
        </form>
    </div>

    <!-- Formulário de Adicionar Despesa -->
    <div class="form-section">
        <h2>Adicionar Despesa</h2>
        <form id="despesaForm">
            <input type="text" id="despesaDescription" class="form-control" placeholder="Descrição da Despesa" required>
            <input type="number" id="despesaAmount" step="0.01" class="form-control" placeholder="Valor da Despesa (ex: 500,00)" required>
            <input type="text" id="despesaDate" class="form-control data-input" placeholder="DD/MM/AAAA" maxlength="10" required>

            <div class="metodo-pagamento">
                <label>
                    <input type="radio" name="metodoPagamento" value="Pix" required> Pix
                </label>
                <label>
                    <input type="radio" name="metodoPagamento" value="Crédito" required> Crédito
                </label>
                <label>
                    <input type="radio" name="metodoPagamento" value="Débito" required> Débito
                </label>
                <label>
                    <input type="radio" name="metodoPagamento" value="Boleto" required> Boleto
                </label>
            </div>
            <script>
                const despesaDateInput = document.getElementById('despesaDate');

                despesaDateInput.addEventListener('input', (e) => {
                    let input = e.target.value;

                    // Remove qualquer caractere que não seja um número
                    input = input.replace(/\D/g, '');

                    // Formata automaticamente com "/"
                    if (input.length >= 3 && input.length <= 4) {
                        input = input.slice(0, 2) + '/' + input.slice(2);
                    } else if (input.length > 4) {
                        input = input.slice(0, 2) + '/' + input.slice(2, 4) + '/' + input.slice(4, 8);
                    }

                    e.target.value = input;
                });
            </script>
            <button type="submit" class="btn-adicionar-despesa">Adicionar Despesa</button>
        </form>
    </div>

    <div class="form-section">

        <h2>Adicionar Despesa Fixa</h2>
        <form id="despesaFixaForm">
            <input type="text" id="despesaFixaDescription" class="form-control" placeholder="Descrição da Despesa Fixa" required>
            <input type="number" id="despesaFixaAmount" step="0.01" class="form-control" placeholder="Valor da Despesa Fixa (ex: 200,00)" required>
            <input type="text" id="despesaFixaDate" class="form-control data-input" placeholder="DD/MM/AAAA" maxlength="10" required>

            <div class="metodo-pagamento">
                <label>
                    <input type="radio" name="metodoPagamentoFixo" value="Pix" required> Pix
                </label>
                <label>
                    <input type="radio" name="metodoPagamentoFixo" value="Crédito" required> Crédito
                </label>
                <label>
                    <input type="radio" name="metodoPagamentoFixo" value="Débito" required> Débito
                </label>
                <label>
                    <input type="radio" name="metodoPagamentoFixo" value="Boleto" required> Boleto
                </label>
            </div>

            <script>
                const despesaFixaDateInput = document.getElementById('despesaFixaDate');

                despesaFixaDateInput.addEventListener('input', (e) => {
                    let input = e.target.value;

                    // Remove qualquer caractere que não seja um número
                    input = input.replace(/\D/g, '');

                    // Formata automaticamente com "/"
                    if (input.length >= 3 && input.length <= 4) {
                        input = input.slice(0, 2) + '/' + input.slice(2);
                    } else if (input.length > 4) {
                        input = input.slice(0, 2) + '/' + input.slice(2, 4) + '/' + input.slice(4, 8);
                    }

                    e.target.value = input;
                });
            </script>
            <button type="submit" class="btn-adicionar-despesa">Adicionar Despesa Fixa</button>
        </form>
    </div>

    <div class="list-section">
        <h2>Rendas Fixas</h2>
        <ul id="rendaFixaList" class="list"></ul>

        <h2>Rendas Extras</h2>
        <ul id="rendaExtraList" class="list"></ul>

        <h2>Despesas</h2>
        <ul id="despesaList" class="list"></ul>

        <h2>Despesas Fixas</h2>
        <ul id="despesaFixaList" class="list"></ul>
    </div>

    <div class="chart-container">
        <h2> Graficos </h2>
        <canvas class="pie--grafic" id="myPieChart"></canvas>
        <canvas class="pie--grafic" id="metodoPagamentoPieChart"></canvas>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <h2><span id="balance">0.00</span></h2>
</div>

<script src="app.js"></script>
<script>
    // Função para obter o ano atual
    function getCurrentYear() {
        const now = new Date();
        return now.getFullYear(); // Retorna o ano atual
    }

    // Função para obter o mês atual
    function getCurrentMonth() {
        const now = new Date();
        return now.getMonth() + 1; // Mês é de 0 a 11, então adicionamos 1
    }

    // Função para exibir o ano e o mês atuais
    function displayCurrentYearMonth() {
        const currentYear = getCurrentYear();
        const currentMonth = getCurrentMonth();
        const monthNames = [
            "Janeiro", "Fevereiro", "Março", "Abril", "Maio", "Junho",
            "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"
        ];
        document.getElementById('currentYearMonth').innerText = `Ano: ${currentYear} - Mês: ${monthNames[currentMonth - 1]}`;
    }

    // Chame a função para exibir o ano e mês atuais ao carregar a página
    displayCurrentYearMonth();
</script>
<footer class="rodapé">
    <div class="contato">
        <h3>Entre em Contato</h3>
        <ul>
            <li><strong>WhatsApp:</strong> <a href="https://wa.me/69992700080" target="_blank">(69) 99270-0080</a></li>
            <li><strong>Instagram:</strong> <a href="https://www.instagram.com/carlos_charles_25/profilecard/?igsh=MXhraThlcTJ0ZnNzbQ==" target="_blank">@carlos_charles_25</a></li>
            <li><strong>LinkedIn:</strong> <a href="https://www.linkedin.com/in/carlos-charles-810426302/" target="_blank">Carlos Charles</a></li>
        </ul>
    </div>
</footer></body>
</html>
